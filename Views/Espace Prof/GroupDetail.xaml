<Page
    x:Class="SDKTemplate.Views.Espace_Prof.GroupDetail"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SDKTemplate.Views.Espace_Prof"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    xmlns:data="using:SDKTemplate.Models"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    Loaded="Page_Loaded"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="3*"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="2.5*"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal" Margin="40,20,0,0" Grid.Column="0" HorizontalAlignment="Left">
                <Image Width="80" Margin="0,0,20,0" Source="/Images/group.png" />
                <StackPanel Margin="0,10,0,0">
                    <TextBlock Style="{ThemeResource TitleTextBlockStyle}" x:Name="grpName" FontSize="35"  ></TextBlock>
                    <TextBlock x:Name="nivaeu" Style="{ThemeResource SubtitleTextBlockStyle}"  FontSize="25"></TextBlock>
                </StackPanel>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Margin="20,20,0,0" Grid.Column="1" HorizontalAlignment="Right">
                <Image Width="80" Source="/Images/enseignant.png" />
                <StackPanel  Margin="20,18,20,0">
                    <TextBlock Style="{ThemeResource TitleTextBlockStyle}" x:Name="Prof" FontSize="35" ></TextBlock>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock x:Name="Subjct" Style="{ThemeResource SubtitleTextBlockStyle}"  FontSize="25"></TextBlock>
                        <TextBlock x:Name="Subj" Style="{ThemeResource SubtitleTextBlockStyle}"  FontSize="25"></TextBlock>
                    </StackPanel>
                </StackPanel>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="20,10,0,0" >
                <Button Click="Button_Click"  Style="{ThemeResource DateTimePickerFlyoutButtonStyle}" Height="60"  FontSize="30">
                    <TextBlock Style="{StaticResource TitleTextBlockStyle}" Text="Les élèves"></TextBlock>
                </Button>
                <Button Click="Button_Click_1"  Style="{ThemeResource DateTimePickerFlyoutButtonStyle}" Height="60" FontSize="30">
                    <TextBlock Style="{StaticResource TitleTextBlockStyle}" Text="Présence"></TextBlock>
                </Button>
            </StackPanel>
            <StackPanel HorizontalAlignment="Right" Grid.Column="1" Orientation="Horizontal" Grid.Row="1" Margin="20,15,20,0" >
                <Button x:Name="MonthDetailReturn" Click="Button_Click_2" Style="{ThemeResource AccentButtonStyle}" Height="60" FontSize="30">
                    <TextBlock x:Name="ReturnText" Style="{StaticResource TitleTextBlockStyle}" Text="Les horaires"></TextBlock>
                </Button>
                <Button Click="Button_Click_3" Height="60" FontSize="30" Style="{ThemeResource AccentButtonStyle}" Margin="2,0,0,0">
                    <StackPanel Orientation="Horizontal">
                        <SymbolIcon Symbol="Back" Margin="5,5,15,0"></SymbolIcon>
                        <TextBlock Style="{StaticResource TitleTextBlockStyle}">
                            <Run Text="List de Groups"></Run>
                        </TextBlock>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>
        
        <Grid x:Name="Student" BorderThickness="2" BorderBrush="{StaticResource ContentDialogBorderThemeBrush}" Grid.Row="1" Margin="20,0,20,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="4.2*"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"></RowDefinition>
                <RowDefinition Height="5*"></RowDefinition>
            </Grid.RowDefinitions>
            
            <Grid Height="100" Margin="150,30,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2.8*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <TextBlock  Text="Nom et Prénom" Style="{StaticResource TitleTextBlockStyle}" FontSize="25" Grid.Column="0"></TextBlock>
                <TextBlock  Text="Absence" Style="{StaticResource TitleTextBlockStyle}" FontSize="25" Grid.Column="2"></TextBlock>
                <TextBlock  Text="Téléphone" Style="{StaticResource TitleTextBlockStyle}" FontSize="25" Grid.Column="1"></TextBlock>
                <TextBlock   Text="Payement" Style="{StaticResource TitleTextBlockStyle}" FontSize="25" Grid.Column="3"></TextBlock>
            </Grid>
            <Frame Height="2" Background="#707070"  VerticalAlignment="Bottom" Margin="100,0,50,0"></Frame>

                   
            <GridView x:Name="FilteredListView"
                      Grid.Row="1"
                      ItemsSource="{x:Bind Students}" 
                      IsItemClickEnabled="True" 
                      ItemClick="FilteredListView_ItemClick"
                      >
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <ItemsWrapGrid x:Name="MaxItemsWrapGrid"
                           MaximumRowsOrColumns="1" 
                                       Orientation="Horizontal"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>

                <GridView.ItemTemplate>
                    <DataTemplate x:DataType="data:GroupStudents">

                        <StackPanel x:Name="panel" Height="100" Width="1500" HorizontalAlignment="Stretch" Margin="0,0,0,0"  Orientation="Horizontal" Loaded="panel_Loaded">
                            <Grid Height="100" Width="1090" Margin="0,20,0,0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="4*"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                    <ColumnDefinition Width="*"></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <StackPanel Orientation="Horizontal" Grid.Column="0">
                                    <Image VerticalAlignment="Top" Source="{Binding Image}"  Width="50" Margin="30,10,15,10"></Image>
                                    <StackPanel >
                                        <TextBlock VerticalAlignment="Top" Style="{ThemeResource BaseTextBlockStyle}" FontSize="25" Margin="0,0,0,5">
                                                <Run Text="{x:Bind Name}"></Run>
                                                <Run Text="{x:Bind Surname}"></Run>
                                        </TextBlock>
                                        <TextBlock VerticalAlignment="Top" Text="{x:Bind School}" Style="{ThemeResource BaseTextBlockStyle}" FontSize="20" Margin="0,0,0,5"></TextBlock>
                                    </StackPanel>
                                </StackPanel>
                                <TextBlock VerticalAlignment="Top" Grid.Column="1" Text="{x:Bind Number}" Style="{ThemeResource BaseTextBlockStyle}" FontSize="20" Margin="0,0,0,5"></TextBlock>
                                <TextBlock Margin="-20,0,0,0" Grid.Column="2" HorizontalAlignment="Center" x:Name="Absence" Style="{ThemeResource BodyTextBlockStyle}" FontSize="21">
                                    <Run Text="{Binding Absence}"></Run>
                                </TextBlock>
                                <TextBlock Margin="35,0,0,0" Grid.Column="3" x:Name="Payement"    Style="{ThemeResource BodyTextBlockStyle}" FontSize="21">
                                    <Run Text="{Binding Payment}"></Run>
                                    <Run Text="DT"></Run>
                                </TextBlock>
                            </Grid>
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>

            </GridView>
            <ListBox SelectionChanged="ListView_SelectionChanged" x:Name="ListView"  HorizontalAlignment="Right" Margin="50,10,50,50" Visibility="Collapsed" Background="Black" VerticalAlignment="Top" Width="250" Grid.Row="1" Height="80">
                <x:String>Ajouter un nouveau élève</x:String>
                <x:String>Ajouter un élève actuel</x:String>
            </ListBox>
            <StackPanel Grid.RowSpan="2" Margin="15" HorizontalAlignment="Stretch" Background="#171717" BorderBrush="#707070" BorderThickness="1" Grid.Column="1" >
                <TextBlock Text="Recherche :" Margin="20" Style="{StaticResource HeaderTextBlockStyle}" FontSize="20"></TextBlock>
                <AutoSuggestBox TextChanged="Name_TextChanged"  PlaceholderText="Nom" x:Name="Name" Margin="20,0,20,0" ></AutoSuggestBox>
                <AutoSuggestBox TextChanged="Name_TextChanged" PlaceholderText="Prénom"  x:Name="Surname" Margin="20,30,20,0" ></AutoSuggestBox>
                <AutoSuggestBox TextChanged="Name_TextChanged" PlaceholderText="Lycée" x:Name="School" Margin="20,30,20,0" ></AutoSuggestBox>
            </StackPanel>
        </Grid>
        <Grid BorderBrush="{StaticResource ContentDialogBorderThemeBrush}" x:Name="TimeLine" BorderThickness="2" Grid.Row="1" Margin="20,0,20,20">
            <GridView x:Name="HoraireListView"
                      Grid.Row="1"
                      Margin="20"  
                      ItemsSource="{x:Bind Months}" 
                      ItemClick="HoraireListView_ItemClick"
                      IsItemClickEnabled="True"            
                >

                <GridView.ItemTemplate>
                    <DataTemplate x:DataType="data:Month">

                        <StackPanel x:Name="TimeLinePanel" Height="180" Width="365" Loaded="TimeLinePanel_Loaded">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="/Images/MonthIcon.png" Width="40" Margin="30,25,20,10"></Image>
                                <TextBlock Style="{ThemeResource BaseTextBlockStyle}" Margin="0,35,0,5">      
                                    <Run Text="{x:Bind MonthName}" FontSize="21"></Run>
                                </TextBlock>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"  Margin="30,5,0,5">
                                <TextBlock x:Name="Subject"    Style="{ThemeResource BodyTextBlockStyle}" FontSize="21">
                                    <Run Text="Nombre de séances : " > </Run>
                                    <Run Text="{x:Bind NumberSessions}" > </Run>
                                </TextBlock>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal"  Margin="30,5,0,5">
                                <TextBlock  Style="{ThemeResource BodyTextBlockStyle}" FontSize="21">
                                    <Run Text="Payement : " > </Run>
                                    <Run Text="{x:Bind Payement}" > </Run>
                                </TextBlock>
                            </StackPanel>
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>

            </GridView>
        </Grid>
        <Frame DataContextChanged="Session_DataContextChanged" Grid.Row="1" x:Name="Session" />
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"></RowDefinition>
                <RowDefinition Height="3*"></RowDefinition>
                <RowDefinition Height="*"></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"></ColumnDefinition>
                <ColumnDefinition Width="2*"></ColumnDefinition>
                <ColumnDefinition Width="*"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Button x:Name="Exist" Grid.Column="1" Click="Exist_Click" HorizontalAlignment="Right" VerticalAlignment="Bottom" Style="{ThemeResource AccentButtonStyle}" Height="60" FontSize="30">
                <TextBlock Style="{StaticResource TitleTextBlockStyle}" Text="Fermer"></TextBlock>
            </Button>
            <Frame BorderBrush="{StaticResource ContentDialogBorderThemeBrush}" BorderThickness="2"  Grid.Row="1" Grid.Column="1" x:Name="Add" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}" Padding="0,0,5,5"/>
        </Grid>
        <Grid BorderBrush="{StaticResource ContentDialogBorderThemeBrush}" x:Name="Default" BorderThickness="2" Grid.Row="1" Margin="20,0,20,20"/>
    </Grid>
</Page>
